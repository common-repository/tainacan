"use strict";(self.webpackChunktainacan=self.webpackChunktainacan||[]).push([[9560],{15500:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(40834);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const c={name:"ImporterEditionForm",components:{MetadatumEditionForm:a(11158).A},data:function(){return{importerId:Number,importer:null,isLoading:!1,isLoadingSourceInfo:!1,isLoadingRun:!1,mappedCollection:{id:Number,mapping:{},total_items:Number},importerType:"",importerName:"",collection:void 0,importerSourceInfo:null,collections:[],collectionMetadata:[],collectionId:void 0,isNewMetadatumModalActive:!1,isLoadingMetadatumTypes:!1,selectedMetadatumType:void 0,isEditingMetadatum:!1,metadatum:{},backgroundProcess:void 0,metadataSearchCancel:void 0,showTitlePromptModal:!1,selectedTitle:void 0,formErrorMessage:""}},computed:l(l({},(0,n.L8)("metadata",{metadatumTypes:"getMetadatumTypes"})),{},{collectionNonChildMetadata:function(){var e=this;return Array.isArray(this.collectionMetadata)?this.collectionMetadata.filter((function(t){return!e.checkIfMetadatumIsChild(t)})):[]}}),created:function(){var e=this;this.importerType=this.$route.params.importerType,this.sessionId=this.$route.params.sessionId,this.collectionId=this.$route.params.collectionId,this.mappedCollection.id=this.collectionId,this.fetchAvailableImporters().then((function(t){t[e.importerType]&&(e.importerName=t[e.importerType].name)})),this.loadImporter(),this.fetchCollectionBasics({collectionId:this.collectionId,isContextEdit:!0}).then((function(t){e.collection=t}))},beforeUnmount:function(){null!=this.metadataSearchCancel&&this.metadataSearchCancel.cancel("Metadata search Canceled.")},methods:l(l(l(l(l({},(0,n.i0)("importer",["fetchAvailableImporters","fetchImporter","sendImporter","updateImporter","updateImporterFile","updateImporterURL","updateImporterOptions","fetchImporterSourceInfo","updateImporterCollection","runImporter","fetchMappingImporter"])),(0,n.i0)("bgprocess",["fetchProcess"])),(0,n.i0)("metadata",["fetchMetadata","fetchMetadatumTypes","sendMetadatum"])),(0,n.i0)("collection",["fetchCollectionBasics"])),{},{loadImporter:function(){var e=this;this.isLoading=!0,this.formErrorMessage="",this.fetchImporter(this.sessionId).then((function(t){e.sessionId=t.id,e.importer=JSON.parse(JSON.stringify(t)),e.isLoading=!1,e.isLoadingSourceInfo=!0,e.formErrorMessage="",e.fetchImporterSourceInfo(e.sessionId).then((function(t){e.importerSourceInfo=t,e.mappedCollection.total_items=e.importerSourceInfo.source_total_items,e.isLoadingSourceInfo=!1,e.loadMetadata()})).catch((function(t){e.isLoadingSourceInfo=!1,e.formErrorMessage=t.error_message,e.$console.log(t)}))})).catch((function(t){e.$console.error(t),e.formErrorMessage=t.error_message}))},loadMetadata:function(){var e=this;this.isFetchingCollectionMetadata=!0,null!=this.metadataSearchCancel&&this.metadataSearchCancel.cancel("Metadata search Canceled."),this.fetchMetadata({collectionId:this.collectionId,isRepositoryLevel:!1,isContextEdit:!1,parent:"any"}).then((function(t){e.formErrorMessage="",t.request.then((function(t){e.collectionMetadata=JSON.parse(JSON.stringify(t)),e.isFetchingCollectionMetadata=!1,e.fetchMappingImporter({collection:e.collectionId,sessionId:e.sessionId}).then((function(t){t&&(e.mappedCollection.mapping=t)}))})).catch((function(t){e.$console.error(t),e.formErrorMessage=t.error_message,e.isFetchingCollectionMetadata=!1})),e.metadataSearchCancel=t.source})).catch((function(){return e.isFetchingCollectionMetadata=!1}))},cancelBack:function(){this.$router.go(-2)},checkIfMetadatumIsAvailable:function(e){if(null!=this.mappedCollection.mapping[e]&&null!=this.importerSourceInfo&&null!=this.importerSourceInfo){var t=this.mappedCollection.mapping[e],a=this.importerSourceInfo.source_metadata;if(a&&a.indexOf(t)>=0)return!0}return!1},checkIfChildMetadatumIsAvailable:function(e,t,a){return!!(this.mappedCollection.mapping[t]&&this.mappedCollection.mapping[t][a]&&this.mappedCollection.mapping[t][a][e]&&null!=this.importerSourceInfo&&null!=this.importerSourceInfo)},checkIfMetadatumIsCompound:function(e){return e.metadata_type_object&&e.metadata_type_object.component&&"tainacan-compound"==e.metadata_type_object.component},checkCurrentSelectedCollectionMetadatum:function(e,t){for(var a in this.mappedCollection.mapping){if(this.mappedCollection.mapping[a]==e)return a;if(t&&Object.keys(this.mappedCollection.mapping[a])&&Object.keys(this.mappedCollection.mapping[a])[0]&&Object.keys(this.mappedCollection.mapping[a])[0]==e)return a}},checkCurrentSelectedCollectionChildMetadatum:function(e,t){if(this.mappedCollection.mapping[t]&&Object.values(this.mappedCollection.mapping[t])&&Object.values(this.mappedCollection.mapping[t])[0]){var a=Object.values(this.mappedCollection.mapping[t])[0];for(var n in a)if(a[n]==e)return n}else;},checkIfMetadatumIsChild:function(e){return e.parent&&e.parent>0},getChildOfSelectedCompoundMetadata:function(e){var t=this;return this.collectionMetadata.filter((function(a){return a.parent==t.checkCurrentSelectedCollectionMetadatum(Object.entries(e)[0][0],!0)}))},onRunImporter:function(e){var t=this;if(!0!==e){var a=this.collectionMetadata.findIndex((function(e){return"Tainacan\\Metadata_Types\\Core_Title"==e.metadata_type}));if(a>=0&&this.mappedCollection&&this.mappedCollection.mapping&&!this.mappedCollection.mapping[this.collectionMetadata[a].id])return void(this.showTitlePromptModal=!0)}this.isLoadingRun=!0,this.formErrorMessage="",this.updateImporterCollection({sessionId:this.sessionId,collection:this.mappedCollection}).then((function(e){t.importer=e,t.finishRunImporter()})).catch((function(e){t.isLoadingRun=!1,t.$console.log(e),t.formErrorMessage=e.error_message}))},finishRunImporter:function(){var e=this;this.formErrorMessage="",this.runImporter(this.sessionId).then((function(t){e.backgroundProcess=t,e.isLoadingRun=!1,e.$router.push(e.$routerHelper.getProcessesPage())})).catch((function(t){e.isLoadingRun=!1,e.$console.log(t),e.formErrorMessage=t.error_message}))},onSelectCollectionChildMetadata:function(e,t,a,n){if(this.formErrorMessage="",this.mappedCollection.mapping[a]&&this.mappedCollection.mapping[a]&&this.mappedCollection.mapping[a][n]){var o=Array.isArray(this.mappedCollection.mapping[a][n])?{}:this.mappedCollection.mapping[a][n],i="";for(var l in o)o[l]==t&&(i=l);""!=i&&delete o[i],e&&(o[e]=t),this.mappedCollection.mapping[a][n]=o,this.collectionMetadata.push(""),this.collectionMetadata.pop()}},onSelectCollectionMetadata:function(e,t,a,n){this.formErrorMessage="";var o="";for(var i in this.mappedCollection.mapping)this.mappedCollection.mapping[i]==t&&(o=i),a&&Object.keys(this.mappedCollection.mapping[i])&&Object.keys(this.mappedCollection.mapping[i])[0]&&Object.keys(this.mappedCollection.mapping[i])[0]==t&&(o=i);""!=o&&delete this.mappedCollection.mapping[o];var l="";a?(l={})[t]=n:l=t,this.mappedCollection.mapping[e]=l,this.collectionMetadata.push(""),this.collectionMetadata.pop()},onSelectMetadatumType:function(e){var t=this;this.formErrorMessage="",this.sendMetadatum({collectionId:this.collectionId,name:e.name,metadatumType:e.className,status:"auto-draft",isRepositoryLevel:!1,newIndex:0}).then((function(a){t.selectedMetadatumType=e.className,t.metadatum=a,t.isEditingMetadatum=!0})).catch((function(e){t.$console.error(e)}))},createNewMetadatum:function(){var e=this;this.fetchMetadatumTypes().then((function(){e.isLoadingMetadatumTypes=!1,e.isNewMetadatumModalActive=!0})).catch((function(){e.isLoadingMetadatumTypes=!1}))},onMetadatumEditionFinished:function(){var e=this;delete this.metadatum,this.isEditingMetadatum=!1,this.isNewMetadatumModalActive=!1,this.selectedMetadatumType=void 0,this.isFetchingCollectionMetadata=!0,null!=this.metadataSearchCancel&&this.metadataSearchCancel.cancel("Metadata search Canceled."),this.fetchMetadata({collectionId:this.collectionId,isRepositoryLevel:!1,isContextEdit:!1,parent:"any"}).then((function(t){t.request.then((function(t){e.collectionMetadata=JSON.parse(JSON.stringify(t)),e.isFetchingCollectionMetadata=!1})).catch((function(t){e.$console.error(t),e.isFetchingCollectionMetadata=!1})),e.metadataSearchCancel=t.source})).catch((function(){return e.isFetchingCollectionMetadata=!1}))},onMetadatumEditionCanceled:function(){this.metadatum&&delete this.metadatum,this.isEditingMetadatum=!1,this.isNewMetadatumModalActive=!1,this.selectedMetadatumType=void 0},onConfirmTitleSelection:function(e){e.preventDefault();var t=this.collectionMetadata.findIndex((function(e){return"Tainacan\\Metadata_Types\\Core_Title"==e.metadata_type}));t>=0&&this.onSelectCollectionMetadata(this.collectionMetadata[t].id,this.importerSourceInfo.source_metadata[this.selectedTitle]),this.showTitlePromptModal=!1,this.onRunImporter()},createAllMetadata:function(){var e=this;this.mappedCollection.mapping={},this.importerSourceInfo.source_metadata.forEach((function(t,a){e.mappedCollection.mapping["create_metadata"+a]=t}))}})}},15244:(e,t,a)=>{a.d(t,{X:()=>G});var n=a(6934);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var i={class:"repository-level-page page-container"},l={class:"tainacan-page-title"},r={class:"breadcrumbs"},c={key:0,class:"tainacan-form","label-width":"120px"},d={key:0},s={class:"mapping-control"},u={key:0,class:"mapping-header"},p={value:null},m=["value"],f=["value"],h=["value","disabled"],g={value:null},v=["value"],b=["value","disabled"],_={value:null},y=["value","disabled"],k={key:2},C={style:{"font-style":"italic"}},M={key:2},I={key:3},x={key:0,autofocus:"true",tabindex:"-1",role:"dialog","aria-modal":""},L={class:"tainacan-modal-content"},S={class:"tainacan-modal-title"},E={class:"tainacan-form"},w={class:"metadata-types-container"},$=["onClick"],T={class:"field is-grouped form-submit"},O={class:"control"},j={key:1},X={class:"field is-grouped form-submit"},F={class:"control"},A={class:"help is-danger"},N={class:"control"},P=["disabled"],V={class:"tainacan-modal-content tainacan-form"},Q={class:"tainacan-modal-title"},R={class:"columns"},W={class:"column"},U={style:{margin:"12px 0px 24px 0px"}},z=["value"],K={style:{"text-align":"right"},class:"column"},D={style:{"margin-top":"-24px"},class:"field is-grouped form-submit"},J={class:"control"},B={style:{"margin-left":"auto"},class:"control"},H={class:"control"},q=["disabled"];function G(e,t,a,G,Y,Z){var ee=(0,n.g2)("router-link"),te=(0,n.g2)("b-loading"),ae=(0,n.g2)("b-select"),ne=(0,n.g2)("metadatum-edition-form"),oe=(0,n.g2)("b-modal"),ie=(0,n.g2)("b-field");return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.Lk)("div",l,[(0,n.Lk)("h1",null,(0,n.v_)(e.$i18n.get("label_metadata_mapping")),1),(0,n.Lk)("a",{class:"back-link has-text-secondary",onClick:t[0]||(t[0]=function(t){return e.$router.go(-1)})},(0,n.v_)(e.$i18n.get("back")),1),t[21]||(t[21]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("nav",r,[(0,n.bF)(ee,{to:e.$routerHelper.getCollectionsPath()},{default:(0,n.k6)((function(){return[(0,n.eW)((0,n.v_)(e.$i18n.get("repository")),1)]})),_:1},8,["to"]),t[18]||(t[18]=(0,n.eW)(" > ")),(0,n.bF)(ee,{to:e.$routerHelper.getAvailableImportersPath()},{default:(0,n.k6)((function(){return[(0,n.eW)((0,n.v_)(e.$i18n.get("importers")),1)]})),_:1},8,["to"]),t[19]||(t[19]=(0,n.eW)(" > ")),(0,n.bF)(ee,{to:e.$routerHelper.getImporterPath(Y.importerType,e.sessionId)},{default:(0,n.k6)((function(){return[(0,n.eW)((0,n.v_)(null!=Y.importerType?null!=Y.importerName?Y.importerName:Y.importerType:e.$i18n.get("title_importer_page")),1)]})),_:1},8,["to"]),t[20]||(t[20]=(0,n.eW)(" > ")),(0,n.bF)(ee,{to:e.$routerHelper.getImporterMappingPath(Y.importerType,e.sessionId,Y.collectionId)},{default:(0,n.k6)((function(){return[(0,n.eW)((0,n.v_)(e.$i18n.get("label_metadata_mapping")),1)]})),_:1},8,["to"])])]),(0,n.bF)(te,{modelValue:Y.isLoading,"onUpdate:modelValue":t[1]||(t[1]=function(e){return Y.isLoading=e}),"can-cancel":!1},null,8,["modelValue"]),null!=Y.importer&&null!=Y.importer?((0,n.uX)(),(0,n.CE)("form",c,[(0,n.Lk)("p",null,(0,n.v_)(e.$i18n.get("info_metadata_mapping_helper")),1),t[30]||(t[30]=(0,n.Lk)("br",null,null,-1)),(0,n.bF)(te,{modelValue:Y.isLoadingSourceInfo,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Y.isLoadingSourceInfo=e}),"is-full-page":!1,"can-cancel":!1},null,8,["modelValue"]),null==Y.importerSourceInfo||null==Y.importerSourceInfo||Y.isLoading?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",d,[(0,n.Lk)("div",s,[Y.importerSourceInfo.source_metadata&&Y.importerSourceInfo.source_metadata.length>0?((0,n.uX)(),(0,n.CE)("a",{key:0,style:{"margin-left":"2rem","font-size":"0.875em"},class:"is-inline is-pulled-right add-link has-text-secondary",onClick:t[3]||(t[3]=function(e){return Z.createAllMetadata()})},[t[22]||(t[22]=(0,n.Lk)("span",{class:"icon"},[(0,n.Lk)("i",{class:"tainacan-icon tainacan-icon-approvedcircle"})],-1)),(0,n.eW)(" "+(0,n.v_)(e.$i18n.get("label_set_all_create_metadata")),1)])):(0,n.Q3)("",!0),null!=Y.collectionId&&null!=Y.collectionId&&Y.importerSourceInfo.source_metadata&&Y.importerSourceInfo.source_metadata.length>0&&Y.collection&&Y.collection.current_user_can_edit_metadata?((0,n.uX)(),(0,n.CE)("a",{key:1,style:{"font-size":"0.875em"},class:"is-inline is-pulled-right add-link has-text-secondary",onClick:t[4]||(t[4]=function(e){return Z.createNewMetadatum()})},[t[23]||(t[23]=(0,n.Lk)("span",{class:"icon"},[(0,n.Lk)("i",{class:"tainacan-icon tainacan-icon-add"})],-1)),(0,n.eW)(" "+(0,n.v_)(e.$i18n.get("label_add_more_metadata")),1)])):(0,n.Q3)("",!0)]),Y.importerSourceInfo.source_metadata.length>0||Y.importerSourceInfo.source_special_fields&&Y.importerSourceInfo.source_special_fields.length>0?((0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("p",null,(0,n.v_)(e.$i18n.get("label_from_source_collection")),1),t[24]||(t[24]=(0,n.Lk)("hr",null,null,-1)),t[25]||(t[25]=(0,n.Lk)("span",{class:"icon"},[(0,n.Lk)("i",{class:"tainacan-icon tainacan-icon-pointer tainacan-icon-1-25em"})],-1)),t[26]||(t[26]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("p",null,(0,n.v_)(e.$i18n.get("label_to_target_collection")),1)])):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(Y.importerSourceInfo.source_metadata,(function(t,a){return(0,n.uX)(),(0,n.CE)("div",{key:a,class:(0,n.C4)(["source-metadatum",{"has-children":"object"==o(t)&&Object.entries(t)[0]}])},["string"==typeof t?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.Lk)("p",null,(0,n.v_)(t),1),null!=Y.collectionMetadata&&Y.collectionMetadata.length>0&&!e.isFetchingCollectionMetadata?((0,n.uX)(),(0,n.Wv)(ae,{key:0,"model-value":Z.checkCurrentSelectedCollectionMetadatum(t),placeholder:e.$i18n.get("label_select_metadatum"),"onUpdate:modelValue":function(e){return Z.onSelectCollectionMetadata(e,t)}},{default:(0,n.k6)((function(){return[(0,n.Lk)("option",p,(0,n.v_)(e.$i18n.get("label_select_metadatum")),1),Y.collection&&Y.collection.current_user_can_edit_metadata?((0,n.uX)(),(0,n.CE)("option",{key:0,value:"create_metadata"+a},(0,n.v_)(e.$i18n.get("label_create_metadatum")),9,m)):(0,n.Q3)("",!0),Y.collection&&Y.collection.current_user_can_edit_metadata?((0,n.uX)(),(0,n.CE)("option",{key:1,value:"create_repository_metadata"+a},(0,n.v_)(e.$i18n.get("label_create_repository_metadata")),9,f)):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(Z.collectionNonChildMetadata,(function(a,o){return(0,n.uX)(),(0,n.CE)("option",{key:o,value:a.id,disabled:Z.checkIfMetadatumIsAvailable(a.id)||Z.checkIfMetadatumIsCompound(a)&&t.indexOf("compound|(")<0},(0,n.v_)(a.name)+" ("+(0,n.v_)(a.metadata_type_object.name)+") "+(0,n.v_)(a.collection_id!=Y.collectionId?e.$i18n.get("label_inherited"):""),9,h)})),128))]})),_:2},1032,["model-value","placeholder","onUpdate:modelValue"])):(0,n.Q3)("",!0)],64)):"object"==o(t)&&Object.entries(t)[0]?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.Lk)("p",null,(0,n.v_)(Object.entries(t)[0][0]),1),null!=Y.collectionMetadata&&Y.collectionMetadata.length>0&&!e.isFetchingCollectionMetadata?((0,n.uX)(),(0,n.Wv)(ae,{key:0,"model-value":Z.checkCurrentSelectedCollectionMetadatum(Object.entries(t)[0][0],!0),placeholder:e.$i18n.get("label_select_metadatum"),"onUpdate:modelValue":function(e){return Z.onSelectCollectionMetadata(e,Object.entries(t)[0][0],!0,Object.entries(t)[0][1])}},{default:(0,n.k6)((function(){return[(0,n.Lk)("option",g,(0,n.v_)(e.$i18n.get("label_select_metadatum")),1),Y.collection&&Y.collection.current_user_can_edit_metadata?((0,n.uX)(),(0,n.CE)("option",{key:0,value:"create_metadata"+a},(0,n.v_)(e.$i18n.get("label_create_metadatum")),9,v)):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(Z.collectionNonChildMetadata,(function(a,i){return(0,n.uX)(),(0,n.CE)("option",{key:i,value:a.id,disabled:!Z.checkIfMetadatumIsCompound(a)||Z.checkIfMetadatumIsAvailable(a.id)||"object"!=o(t)||!Object.entries(t)[0]},(0,n.v_)(a.name)+" ("+(0,n.v_)(a.metadata_type_object.name)+") "+(0,n.v_)(a.collection_id!=Y.collectionId?e.$i18n.get("label_inherited"):""),9,b)})),128))]})),_:2},1032,["model-value","placeholder","onUpdate:modelValue"])):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:(0,n.C4)([{"disabled-child-source-metadatum":[void 0,null,!1,"create_metadata"+a].includes(Z.checkCurrentSelectedCollectionMetadatum(Object.entries(t)[0][0],!0))},"child-source-metadatum"])},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(Object.entries(t)[0][1],(function(o,i){return(0,n.uX)(),(0,n.CE)("div",{key:i,class:"source-metadatum"},[(0,n.Lk)("p",null,(0,n.v_)(o),1),null!=Y.collectionMetadata&&Y.collectionMetadata.length>0&&!e.isFetchingCollectionMetadata?((0,n.uX)(),(0,n.Wv)(ae,{key:0,disabled:[void 0,null,!1,"create_metadata"+a].includes(Z.checkCurrentSelectedCollectionMetadatum(Object.entries(t)[0][0],!0)),"model-value":Z.checkCurrentSelectedCollectionChildMetadatum(o,Z.checkCurrentSelectedCollectionMetadatum(Object.entries(t)[0][0],!0)),placeholder:e.$i18n.get("label_select_metadatum"),"onUpdate:modelValue":function(e){return Z.onSelectCollectionChildMetadata(e,o,Z.checkCurrentSelectedCollectionMetadatum(Object.entries(t)[0][0],!0),Object.entries(t)[0][0])}},{default:(0,n.k6)((function(){return[(0,n.Lk)("option",_,(0,n.v_)(e.$i18n.get("label_select_metadatum")),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(Z.getChildOfSelectedCompoundMetadata(t),(function(a,o){return(0,n.uX)(),(0,n.CE)("option",{key:o,value:a.id,disabled:Z.checkIfChildMetadatumIsAvailable(a.id,Z.checkCurrentSelectedCollectionMetadatum(Object.entries(t)[0][0],!0),Object.entries(t)[0][0])},(0,n.v_)(a.name)+" ("+(0,n.v_)(a.metadata_type_object.name)+") "+(0,n.v_)(a.collection_id!=Y.collectionId?e.$i18n.get("label_inherited"):""),9,y)})),128))]})),_:2},1032,["disabled","model-value","placeholder","onUpdate:modelValue"])):(0,n.Q3)("",!0)])})),128))],2)],64)):(0,n.Q3)("",!0),null==Y.collectionMetadata||Y.collectionMetadata.length<=0?((0,n.uX)(),(0,n.CE)("p",k,(0,n.v_)(e.$i18n.get("info_select_collection_to_list_metadata")),1)):(0,n.Q3)("",!0)],2)})),128)),Y.importerSourceInfo.source_special_fields?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:1},(0,n.pI)(Y.importerSourceInfo.source_special_fields,(function(t,a){return(0,n.uX)(),(0,n.CE)("div",{key:a,class:"source-metadatum"},[(0,n.Lk)("p",C,(0,n.v_)(t),1),(0,n.Lk)("p",null,(0,n.v_)(e.$i18n.get("info_special_fields_mapped_default")),1)])})),128)):(0,n.Q3)("",!0),Y.importerSourceInfo.source_metadata.length<=0?((0,n.uX)(),(0,n.CE)("p",M,[(0,n.eW)((0,n.v_)(e.$i18n.get("info_no_metadata_source_file")),1),t[27]||(t[27]=(0,n.Lk)("br",null,null,-1))])):(0,n.Q3)("",!0),!Y.importerSourceInfo.source_special_fields||Y.importerSourceInfo.source_special_fields.length<=0?((0,n.uX)(),(0,n.CE)("p",I,[(0,n.eW)((0,n.v_)(e.$i18n.get("info_no_special_fields_available")),1),t[28]||(t[28]=(0,n.Lk)("br",null,null,-1))])):(0,n.Q3)("",!0),(0,n.bF)(oe,{modelValue:Y.isNewMetadatumModalActive,"onUpdate:modelValue":t[9]||(t[9]=function(e){return Y.isNewMetadatumModalActive=e}),"trap-focus":"","aria-modal":"","aria-role":"dialog","close-button-aria-label":e.$i18n.get("close"),"custom-class":"tainacan-modal",onClose:t[10]||(t[10]=function(e){return Z.onMetadatumEditionCanceled()})},{default:(0,n.k6)((function(){return[null!=Y.selectedMetadatumType||Y.isEditingMetadatum?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",x,[(0,n.bF)(te,{modelValue:Y.isLoadingMetadatumTypes,"onUpdate:modelValue":t[5]||(t[5]=function(e){return Y.isLoadingMetadatumTypes=e}),"is-full-page":!1},null,8,["modelValue"]),(0,n.Lk)("div",L,[(0,n.Lk)("div",S,[(0,n.Lk)("h2",null,(0,n.v_)(e.$i18n.get("instruction_select_metadatum_type")),1),t[29]||(t[29]=(0,n.Lk)("hr",null,null,-1))]),(0,n.Lk)("section",E,[(0,n.Lk)("div",w,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.metadatumTypes,(function(e,t){return(0,n.uX)(),(0,n.CE)("div",{key:t,class:"metadata-type",onClick:function(t){return Z.onSelectMetadatumType(e)}},[(0,n.Lk)("h4",null,(0,n.v_)(e.name),1)],8,$)})),128))]),(0,n.Lk)("div",T,[(0,n.Lk)("div",O,[(0,n.Lk)("button",{id:"button-cancel-importer-edition",class:"button is-outlined",type:"button",onClick:t[6]||(t[6]=function(e){Z.onMetadatumEditionCanceled(),Y.isNewMetadatumModalActive=!1})},(0,n.v_)(e.$i18n.get("cancel")),1)])])])])])),Y.selectedMetadatumType&&Y.isEditingMetadatum?((0,n.uX)(),(0,n.Wv)(ne,{key:1,"collection-id":Y.collectionId,"is-repository-level":!1,index:0,"original-metadatum":Y.metadatum,"is-inside-importer-flow":!0,onOnEditionFinished:t[7]||(t[7]=function(e){return Z.onMetadatumEditionFinished()}),onOnEditionCanceled:t[8]||(t[8]=function(e){return Z.onMetadatumEditionCanceled()})},null,8,["collection-id","original-metadatum"])):(0,n.Q3)("",!0)]})),_:1},8,["modelValue","close-button-aria-label"])])),null==Y.importerSourceInfo||null==Y.importerSourceInfo?((0,n.uX)(),(0,n.CE)("div",j,[(0,n.Lk)("p",null,(0,n.v_)(e.$i18n.get("info_upload_a_source_to_see_metadata")),1)])):(0,n.Q3)("",!0),(0,n.Lk)("div",X,[(0,n.Lk)("div",F,[(0,n.Lk)("button",{id:"button-cancel-importer-mapping",class:"button is-outlined",type:"button",onClick:t[11]||(t[11]=function(){return Z.cancelBack&&Z.cancelBack.apply(Z,arguments)})},(0,n.v_)(e.$i18n.get("cancel")),1)]),(0,n.Lk)("p",A,(0,n.v_)(Y.formErrorMessage),1),(0,n.Lk)("div",N,[(0,n.Lk)("button",{id:"button-submit-importer-mapping",disabled:null==e.sessionId||null==Y.importer,class:(0,n.C4)([{"is-loading":Y.isLoadingRun,"is-success":!Y.isLoadingRun},"button"]),onClick:t[12]||(t[12]=(0,n.D$)((function(){return Z.onRunImporter&&Z.onRunImporter.apply(Z,arguments)}),["prevent"]))},(0,n.v_)(e.$i18n.get("run")),11,P)])])])):(0,n.Q3)("",!0),Y.importerSourceInfo?((0,n.uX)(),(0,n.Wv)(oe,{key:1,modelValue:Y.showTitlePromptModal,"onUpdate:modelValue":t[17]||(t[17]=function(e){return Y.showTitlePromptModal=e}),"can-cancel":!1,width:820,scroll:"keep","trap-focus":"","close-button-aria-label":e.$i18n.get("close"),autofocus:"",role:"dialog",tabindex:"-1","aria-modal":"","custom-class":"tainacan-modal"},{default:(0,n.k6)((function(){return[(0,n.Lk)("form",V,[(0,n.Lk)("div",Q,[(0,n.Lk)("h2",null,(0,n.v_)(e.$i18n.get("instruction_select_title_mapping")),1),t[31]||(t[31]=(0,n.Lk)("hr",null,null,-1))]),(0,n.Lk)("div",R,[(0,n.Lk)("div",W,[(0,n.Lk)("p",U,(0,n.v_)(e.$i18n.get("info_title_mapping")),1),(0,n.bF)(ie,null,{default:(0,n.k6)((function(){return[(0,n.bF)(ae,{modelValue:Y.selectedTitle,"onUpdate:modelValue":t[13]||(t[13]=function(e){return Y.selectedTitle=e}),expanded:"",placeholder:e.$i18n.get("label_select_metadatum")},{default:(0,n.k6)((function(){return[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(Y.importerSourceInfo.source_metadata,(function(e,t){return(0,n.uX)(),(0,n.CE)("option",{key:t,value:t},(0,n.v_)(e),9,z)})),128))]})),_:1},8,["modelValue","placeholder"])]})),_:1})]),(0,n.Lk)("div",K,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(4,(function(a){return(0,n.Lk)("div",{key:a,class:"item-demo"},[(0,n.Lk)("p",null,(0,n.v_)(""==Y.selectedTitle||null==Y.selectedTitle?e.$i18n.get("label_title"):Y.importerSourceInfo.source_metadata[Y.selectedTitle]),1),t[32]||(t[32]=(0,n.Lk)("div",null,null,-1))])})),64))])]),(0,n.Lk)("div",D,[(0,n.Lk)("div",J,[(0,n.Lk)("button",{class:"button is-outlined",type:"button",onClick:t[14]||(t[14]=function(e){Y.selectedTitle="",Y.showTitlePromptModal=!1})},(0,n.v_)(e.$i18n.get("cancel")),1)]),(0,n.Lk)("div",B,[(0,n.Lk)("button",{class:"button is-secondary",type:"button",onClick:t[15]||(t[15]=function(e){Y.selectedTitle="",Y.showTitlePromptModal=!1,Z.onRunImporter(!0)})},(0,n.v_)(e.$i18n.get("skip")),1)]),(0,n.Lk)("div",H,[(0,n.Lk)("button",{type:"submit",class:"button is-success",disabled:""===Y.selectedTitle||null==Y.selectedTitle,onClick:t[16]||(t[16]=function(){return Z.onConfirmTitleSelection&&Z.onConfirmTitleSelection.apply(Z,arguments)})},(0,n.v_)(e.$i18n.get("apply")),9,q)])])])]})),_:1},8,["modelValue","close-button-aria-label"])):(0,n.Q3)("",!0)])}},36739:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(31601),o=a.n(n),i=a(76314),l=a.n(i)()(o());l.push([e.id,".tainacan-page-title[data-v-726ef5d6]{margin-bottom:38px}.tainacan-page-title h1[data-v-726ef5d6],.tainacan-page-title h2[data-v-726ef5d6]{font-size:1.25em;font-weight:500;color:var(--tainacan-blue5);display:inline-block}.tainacan-page-title a.back-link[data-v-726ef5d6]{font-weight:500;float:right;margin-top:5px}.tainacan-page-title hr[data-v-726ef5d6]{margin:3px 0px 4px 0px;height:1px;background-color:var(--tainacan-secondary)}.tainacan-page-title .breadcrumbs[data-v-726ef5d6]{font-size:0.75em}.tainacan-page-title .level-left .level-item[data-v-726ef5d6]{display:inline-block;margin-left:268px}@media screen and (max-width: 769px){.tainacan-page-title[data-v-726ef5d6]{top:206px;margin-bottom:0px !important}.tainacan-page-title .level-left[data-v-726ef5d6]{margin-left:0px !important}.tainacan-page-title .level-left .level-item[data-v-726ef5d6]{margin-left:30px}.tainacan-page-title .level-right[data-v-726ef5d6]{display:none}}.page-container[data-v-726ef5d6]{padding-bottom:0}.field[data-v-726ef5d6]{position:relative}.tainacan-form[data-v-726ef5d6]{display:flex;flex-direction:column;justify-content:space-between;min-height:247px}.form-submit[data-v-726ef5d6]{margin-top:24px;position:sticky !important;bottom:0;background:var(--tainacan-background-color, white);z-index:9;padding:12px;border-top:1px solid var(--tainacan-gray3);box-shadow:0 -5px 12px -14px var(--tainacan-gray5)}.section-label[data-v-726ef5d6]{font-size:1em !important;font-weight:500 !important;color:var(--tainacan-blue5) !important;line-height:1.2em}.source-metadatum[data-v-726ef5d6]{padding:2px 0;min-height:35px;width:calc(100% - 32px);margin:3px 16px 6px 16px;display:flex;justify-content:space-between;align-items:center;position:relative}.source-metadatum[data-v-726ef5d6]::before{display:block;content:'';position:absolute;height:1px;width:100%;background-color:var(--tainacan-gray2);z-index:-1}.source-metadatum>p[data-v-726ef5d6]{font-weight:normal;transition:font-weight 0.1s ease;padding-right:6px;overflow:hidden;word-wrap:break-word;background-color:var(--tainacan-background-color, white)}.source-metadatum .control[data-v-726ef5d6]{max-width:60%}.source-metadatum:hover>.control[data-v-726ef5d6]{--tainacan-input-border-color: var(--tainacan-gray4)}.source-metadatum[data-v-726ef5d6]:hover::before{background-color:var(--tainacan-gray4)}.source-metadatum:hover>p[data-v-726ef5d6]{font-weight:bold}.source-metadatum.has-children[data-v-726ef5d6]{flex-wrap:wrap}.source-metadatum.has-children[data-v-726ef5d6]::before{top:1rem}.child-source-metadatum[data-v-726ef5d6]{flex-basis:100%;border-left:1px solid var(--tainacan-gray2);padding-left:1em;opacity:1;transition:border-left 0.2s ease, opacity 0.2s ease}.child-source-metadatum .source-metadatum[data-v-726ef5d6]{border-bottom:none;margin-bottom:0;margin-top:2px;padding-top:8px;padding-bottom:0px}.child-source-metadatum.disabled-child-source-metadatum[data-v-726ef5d6]{border-left:1px solid var(--tainacan-gray1);opacity:0.70}.is-inline .control[data-v-726ef5d6]{display:inline}.drop-inner[data-v-726ef5d6]{padding:1em 3em}.mapping-control[data-v-726ef5d6]{background-color:var(--tainacan-background-color, white);position:sticky;top:-34px;z-index:9;height:2.5rem;padding-top:12px}.mapping-header[data-v-726ef5d6]{background-color:var(--tainacan-background-color, white);position:sticky;top:0;z-index:9;width:100%;display:flex;justify-content:space-between;align-items:center;color:var(--tainacan-info-color);font-size:0.875em;font-weight:bold;margin:0 0 12px 0;border-bottom:1px solid var(--tainacan-gray3);box-shadow:0 5px 12px -14px var(--tainacan-gray5)}.mapping-header p[data-v-726ef5d6]{white-space:nowrap}.mapping-header hr[data-v-726ef5d6]{width:100%;margin-left:12px;margin-right:12px;height:1px;background:linear-gradient(90deg, #f2f2f2, #dbdbdb, #f2f2f2)}@media screen and (max-width: 768px){.mapping-header p[data-v-726ef5d6]{white-space:normal}.mapping-header hr[data-v-726ef5d6]{display:none}}.tainacan-modal .animation-content[data-v-726ef5d6]{width:100%;z-index:99999}.tainacan-modal .animation-content #metadatumEditForm[data-v-726ef5d6]{background-color:var(--tainacan-background-color)}.metadata-types-container .metadata-type[data-v-726ef5d6]{border-bottom:1px solid var(--tainacan-gray2);padding:15px calc(2 * var(--tainacan-one-column));cursor:pointer}.metadata-types-container .metadata-type[data-v-726ef5d6]:first-child{margin-top:15px}.metadata-types-container .metadata-type[data-v-726ef5d6]:last-child{border-bottom:none}.metadata-types-container .metadata-type[data-v-726ef5d6]:hover{background-color:var(--tainacan-gray1)}.item-demo[data-v-726ef5d6]{display:inline-block;margin:8px 12px}.item-demo p[data-v-726ef5d6]{max-width:74px;font-size:0.875em;color:var(--tainacan-gray5);margin:4px 8px;text-align:left;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.item-demo div[data-v-726ef5d6]{height:90px;width:90px;background-color:var(--tainacan-gray2);border-radius:2px}\n",""]);const r=l},85578:(e,t,a)=>{var n=a(85072),o=a.n(n),i=a(97825),l=a.n(i),r=a(77659),c=a.n(r),d=a(55056),s=a.n(d),u=a(10540),p=a.n(u),m=a(63494),f=a.n(m),h=a(36739),g={};g.styleTagTransform=f(),g.setAttributes=s(),g.insert=c().bind(null,"head"),g.domAPI=l(),g.insertStyleElement=p();o()(h.A,g),h.A&&h.A.locals&&h.A.locals},29560:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(5443),o=a(40043);a(9911);const i=(0,a(66262).A)(o.A,[["render",n.X],["__scopeId","data-v-726ef5d6"]])},40043:(e,t,a)=>{a.d(t,{A:()=>n.A});var n=a(15500)},5443:(e,t,a)=>{a.d(t,{X:()=>n.X});var n=a(15244)},9911:(e,t,a)=>{a(85578)}}]);